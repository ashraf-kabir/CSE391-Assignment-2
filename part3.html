<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TestPart03</title>

    <script src="vendor/jquery/jquery.min.js"></script>

</head>
<body>

    <!-- Uppercase lowercase -->
    <script type="text/javascript">
        function toggle(button) {
            if (document.getElementById("1").value == "uppercase") {
                document.getElementById("myP").style.textTransform = "uppercase";
                document.getElementById("1").value = "lowercase";
            } else if (document.getElementById("1").value == "lowercase") {
                document.getElementById("myP").style.textTransform = "lowercase";
                document.getElementById("1").value = "uppercase";
            }
        }
    </script>

    <!-- Clear All -->
    <script>
        function clearContents() {
            document.getElementById("myP").value = "";
        }
    </script>

    <!-- sort alphabetically -->
    <script type="text/javascript">

        function sortit(a,b){
            return(a-b)
        }

        function sortvalues(param){
            var inputvalues = document.part03.tarea.value.split(" ") // store input as array of words
            if (param == 0){ //if sort alphabetically
                inputvalues.sort()
            }
            else{ //else if sort numerically
                inputvalues.sort(sortit)
            }
            document.part03.tarea.value=''
            for (i=0; i<inputvalues.length-1; i++){
                document.part03.tarea.value = document.part03.tarea.value + inputvalues[i]+" "
            }
            document.part03.tarea.value += inputvalues[inputvalues.length-1]
        }
    </script>

    <!-- sort numerically -->
    <script>
        function revWords(str) {
            words = str.split(" ");
            j = words.length - 1;
            backWords = new Array();
            for (i = 0; i < words.length; i++) {
                backWords[j] = words[i];
                j--;
            }
            document.part03.tarea.value = backWords.join(" ");
        }
    </script>

    <!-- strip blank, remove empty line -->
    <script>
        jQuery(function ($) {
            $("#six").on("click", function () {
                var avalue = $('#myP').val();
                var newVal = avalue.replace(/^\s*[\r\n]/gm, '');

                //var finalResults = newVal.replace("\n", "");
                $('#myP').val(newVal);
                //var myText = $('#myP').val();
                //var remove_space = myText.replace(/ /g,'');
                //$('#myP').val(remove_space);
            });
        })
    </script>

    <!-- add line numbers -->
    <script>
        function lineNum() {
            var e = document.getElementById('myP').value;
            var arr = e.split("\n");
            var w = "";
            for (i = 0; i<arr.length - 1; i++) {
                j = i+1;
                w = w + j + " " + arr[i] + "\n";
            }
            document.getElementById('myP').value = w;
        }
    </script>

    <!-- shuffle lines -->
    <script>
        function shuffleLines() {
            var lines = $('#myP').val().split(/\n/);
            var texts = [];
            for (var i = 0; i < lines.length; i++) {
                if (/\S/.test(lines[i])) {
                    texts.push($.trim(lines[i]));
                }
            }

            //shuffle
            for (let i = texts.length - 1; i > 0; i--){
                const j = Math.floor(Math.random() * i);
                const temp = texts[i];
                texts[i] = texts[j];
                texts[j] = temp;
            }

            for (var i = 0; i < texts.length; i++) {
                //alert(i + "-  " + texts[i]);
                var x = texts[i];
                var textarea = document.getElementById("myP");
                textarea.value = texts.join("\n");
            }

        }
    </script>

    <form  name="part03" action="">
        <br>
        <h2>Part 03</h2>
        <label for="myP"></label>
        <textarea id="myP" rows="10" name="tarea" cols="80" maxlength="255" required></textarea><br><br>
        <input type="button" id="1" value="uppercase" onclick="toggle(this);">
        <input type="button" id="2" value="Clear all" onclick="clearContents();">
        <input type="button" id="3" value="Sort Alphabetically" onclick="sortvalues(0)">
        <input type="button" id="4" value="Sort Numerically" onclick="sortvalues(1)">
        <input type="button" id="5" value="Reverse" onclick="revWords(document.part03.tarea.value)">
        <input type="button" id="six" value="Strip Blank">
        <input type="button" id="seven" value="Add Line Numbers" onclick="lineNum();">
        <input type="button" id="eight" value="Shuffle" onclick="shuffleLines();">
    </form>

</body>
</html>